###############################################################################
#  "GSSP" metabarcoding bioinformatics pipeline                               #
#             Configuration file                                              #
###############################################################################

# General parameters
project_name: metabarcoding_project

# Files to work with. Specify the extension, e.g. fastq.gz / fq.gz / fastq / fq.
# The default selects any of these
# Regular expression syntax is allowed.
# Only used if no custom sample table is given.
file_extension: "fastq.gz"

# Specify sequence orientation.
  # "fwd" = all sequences are expected to be in 5'-3' orientation.
  # "rev" = all sequences are expected to be in 3'-5' orientation.
  # "mixed" = the orientation of seqs is expected to be mixed (5'-3' and 3'-5)
  # "custom" = the orientation of different files is given in a custom sample table (see below)
  #   In this case there should be a column "orient" which has values "fwd", "rev", or "mixed"
  # if seqs are "mixed", but using "fwd" setting, then some valid seqs (or samples) will be lost.
  # if seqs are "fwd", but using "mixed", then ERROR.
orient: mixed

# Sample parameters
# custom primer trimming parameters per sample can be given as columns in the
# sample table.
custom_sample_table: FALSE

# Added reference sequences (leave blank or use NULL if none)
# "table" should be an Excel *.xlsx spreadsheet, with (at least) two columns in the
# first sheet:
#  Culture_ID: unique identifier for the sequence, muse _exactly_ match the sequence
#    name in "fasta"
#  Protax_synonym: comma-separated taxonomy string for the new ID, starting with
#    kingdom.  Be sure to match the taxonomy used by protax, including spelling!
#    e.g.: Fungi,Basidiomycota,Agaricomycetes,Russulales,Stereaceae,Conferticium_17349,Conferticium_ravum_412824
added_reference:
  fasta:
  table:

################################
### primer trimming settings ###
################################

#forward PCR primer (degenerate positions allowed, according to IUPAC codes).
#Currently supports only a single fwd primer.
forward_primer: "GCATCGATGAAGAACGCAGC" #ITS3
#reverse PCR primer (degenerate positions allowed, according to IUPAC codes).
#Currently supports only a single rev primer.
reverse_primer: "TCCTCCGCTTATTGATATGC" #ITS4

trimming:
  max_err: 0.2        # max error rate (float; e.g 0.2 = 20% error rate) in the primer sequence; or number of mismatches (int; e.g. 1 = 1 mismatch)
  min_overlap: 10     # at least 10 bp of primer sequence must be present
  truncQ_R1: [2, 2]   # truncate ends of R1 at first base with quality score <= N
  truncQ_R2: [2, 2]   # truncate ends of R2 at first base with quality score <= N
  max_n: 0            # remove sequences which contain N (after truncation)
  min_length: 100     # min length after adapter/quality trimming
  cut_R1: 0           # remove N bases from start of R1
  cut_R2: 0           # remove N bases from start of R2
  action: "trim"      # "trim"/"retain" the primer sequences. "trim" = clip primers; "retain" = do not clip the primer after primer has been found.

##################################
### quality filtering settings ###
##################################
filtering:
  maxEE_R1: 1           # max expected errors for R1 reads
  maxEE_R2: 1           # max expected errors for R2 reads

####################################
### tag-jumps filtering settings ###
####################################
# comment out this section or set tag_jump to FALSE to omit this step
tag_jump:
  f: 0.05             # expected cross-talk rate
  p: 1                # power to rise the exponent

###############################
### Feature-by-sample table ###
###############################
# Feature = ASV/OTU/x
repeats: "sum"     # what to to do with the samples that have the SAME NAME.
                    # "sum" = merging the replicates
                    # "error" = STOPs the run if duplicated sample names are detected.
